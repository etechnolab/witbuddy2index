window.Granite=window.Granite||{};
Granite.Sling={SELECTOR_INFINITY:".infinity",CHARSET:"_charset_",STATUS:":status",STATUS_BROWSER:"browser",OPERATION:":operation",OPERATION_DELETE:"delete",OPERATION_MOVE:"move",DELETE_SUFFIX:"@Delete",TYPEHINT_SUFFIX:"@TypeHint",COPY_SUFFIX:"@CopyFrom",MOVE_SUFFIX:"@MoveFrom",ORDER:":order",REPLACE:":replace",DESTINATION:":dest",SAVE_PARAM_PREFIX:":saveParamPrefix",IGNORE_PARAM:":ignore",REQUEST_LOGIN_PARAM:"sling:authRequestLogin",LOGIN_URL:"/system/sling/login.html",LOGOUT_URL:"/system/sling/logout.html"};
(function(l,m){l.Util=function(){var l={patchText:function(b,c){if(c)if(m.isArray(c))for(var d=0;d<c.length;d++)b=b.replace("{"+d+"}",c[d]);else b=b.replace("{0}",c);return b},getTopWindow:function(){var b=window;if(this.iFrameTopWindow)return this.iFrameTopWindow;try{for(;b.parent&&b!==b.parent&&b.parent.location.href;)b=b.parent}catch(c){}return b},setIFrameMode:function(b){this.iFrameTopWindow=b||window},applyDefaults:function(){for(var b,c=arguments[0]||{},d=1;d<arguments.length;d++){b=arguments[d];
for(var g in b){var f=b[g];b.hasOwnProperty(g)&&void 0!==f&&(c[g]=null===f||"object"!==typeof f||f instanceof Array?f instanceof Array?f.slice(0):f:l.applyDefaults(c[g],f))}}return c},getKeyCode:function(b){return b.keyCode?b.keyCode:b.which}};return l}()})(Granite,jQuery);
(function(l,m,n,b){l.HTTP=function(){var c=null,d=/^(?:http|https):\/\/[^\/]+(\/.*)\/(?:etc\.clientlibs|etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs|etc\/designs).*\.js(\?.*)?$/,g=/[^1\w-\.!~\*'\(\)\/%;:@&=\$,]/,f=!1,h={getSchemeAndAuthority:function(a){var c;try{if(-1==a.indexOf("://"))return"";c=a.indexOf("/",a.indexOf("://")+3);return-1==c?a:a.substring(0,c)}catch(e){return""}},getContextPath:function(){return c},detectContextPath:function(){try{if(window.CQURLInfo)c=
CQURLInfo.contextPath||"";else{for(var a=document.getElementsByTagName("script"),b=0;b<a.length;b++){var e=d.exec(a[b].src);if(e){c=e[1];return}}c=""}}catch(q){}},externalize:function(a){try{0==a.indexOf("/")&&c&&0!=a.indexOf(c+"/")&&(a=c+a)}catch(k){}return a},internalize:function(a,b){if("/"==a.charAt(0))return c===a?"":c&&0==a.indexOf(c+"/")?a.substring(c.length):a;b||(b=document);b=h.getSchemeAndAuthority(b.location.href);var e=h.getSchemeAndAuthority(a);return b==e?a.substring(e.length+(c?c.length:
0)):a},getPath:function(a){if(a)a=h.removeParameters(a),a=h.removeAnchor(a);else{if(window.CQURLInfo&&CQURLInfo.requestPath)return CQURLInfo.requestPath;a=window.location.pathname}a=h.internalize(a);var b=a.indexOf(".",a.lastIndexOf("/"));-1!=b&&(a=a.substring(0,b));return a},removeAnchor:function(a){return-1!=a.indexOf("#")?a.substring(0,a.indexOf("#")):a},removeParameters:function(a){return-1!=a.indexOf("?")?a.substring(0,a.indexOf("?")):a},encodePathOfURI:function(a){var b;-1!=a.indexOf("?")?(a=
a.split("?"),b="?"):-1!=a.indexOf("#")?(a=a.split("#"),b="#"):a=[a];g.test(a[0])&&(a[0]=h.encodePath(a[0]));return a.join(b)},encodePath:function(a){a=encodeURI(a).replace(/%5B/g,"[").replace(/%5D/g,"]");a=a.replace(/\+/g,"%2B");a=a.replace(/\?/g,"%3F");a=a.replace(/;/g,"%3B");a=a.replace(/#/g,"%23");a=a.replace(/=/g,"%3D");a=a.replace(/\$/g,"%24");a=a.replace(/,/g,"%2C");a=a.replace(/'/g,"%27");return a=a.replace(/"/g,"%22")},handleLoginRedirect:function(){if(!f){f=!0;alert(l.I18n.get("Your request could not be completed because you have been signed out."));
var a=m.getTopWindow().document.location;a.href=h.externalize(n.LOGIN_URL)+"?resource\x3d"+encodeURIComponent(a.pathname+a.search+a.hash)}},getXhrHook:function(a,c,e){c=c||"GET";return window.G_XHR_HOOK&&b.isFunction(G_XHR_HOOK)?(a={url:a,method:c},e&&(a.params=e),G_XHR_HOOK(a)):null},eval:function(a){"object"!=typeof a&&(a=b.ajax({url:a,type:"get",async:!1}));try{return eval("("+(a.body?a.body:a.responseText)+")")}catch(k){}return null}};return h}()})(Granite,Granite.Util,Granite.Sling,jQuery);
(function(l,m,n,b,c){m.I18n=function(){var d={},g="/libs/cq/i18n/dict.",f=".json",h=void 0,a=!1,k=null,e={},m=!1,p=function(a){if(m)return g+a+f;var b=c("html").attr("data-i18n-dictionary-src");return b?b.replace("{locale}",encodeURIComponent(a)).replace("{+locale}",a):g+a+f};e.LOCALE_DEFAULT="en";e.PSEUDO_LANGUAGE="zz";e.PSEUDO_PATTERN_KEY="_pseudoPattern_";e.init=function(a){a=a||{};this.setLocale(a.locale);this.setUrlPrefix(a.urlPrefix);this.setUrlSuffix(a.urlSuffix)};e.setLocale=function(a){a&&
(h=a)};e.getLocale=function(){c.isFunction(h)&&(h=h());return h||l.documentElement.lang||e.LOCALE_DEFAULT};e.setUrlPrefix=function(a){a&&(g=a,m=!0)};e.setUrlSuffix=function(a){a&&(f=a,m=!0)};e.getDictionary=function(b){b=b||e.getLocale();if(!d[b]){a=0==b.indexOf(e.PSEUDO_LANGUAGE);try{var f=c.ajax(p(b),{async:!1,dataType:"json"});d[b]=c.parseJSON(f.responseText)}catch(t){}d[b]||(d[b]={})}return d[b]};e.get=function(b,c,f){var d,g,h;d=e.getDictionary();h=a?e.PSEUDO_PATTERN_KEY:f?b+" (("+f+"))":b;d&&
(g=d[h]);g||(g=b);a&&(g=g.replace("{string}",b).replace("{comment}",f?f:""));return n.patchText(g,c)};e.getVar=function(a,b){return a?e.get(a,null,b):null};e.getLanguages=function(){if(!k)try{var a=b.eval("/libs/wcm/core/resources/languages.overlay.infinity.json");c.each(a,function(a,b){b.title=e.getVar(b.language);b.title&&b.country&&"*"!=b.country&&(b.title+=" ("+e.getVar(b.country)+")")});k=a}catch(r){k={}}return k};e.parseLocale=function(a){if(!a)return null;var b=a.indexOf("_");0>b&&(b=a.indexOf("-"));
var c;0>b?(c=a,b=null):(c=a.substring(0,b),b=a.substring(b+1));return{code:a,language:c,country:b}};return e}()})(document,Granite,Granite.Util,Granite.HTTP,jQuery);
(function(l,m){l.TouchIndicator=new function(){var l={visibility:"hidden",position:"absolute",width:"30px",height:"30px","-webkit-border-radius":"20px","border-radius":"20px",border:"5px solid orange","-webkit-user-select":"none","user-select":"none",opacity:"0.5","z-index":"2000","pointer-events":"none"},b={},c=[];return{debugWithMouse:!1,init:function(){var b=this;m(document).on("touchstart.touchindicator touchmove.touchindicator touchend.touchindicator",function(c){b.update(c.originalEvent.touches);
return!0});if(this.debugWithMouse)m(document).on("mousemove.touchindicator",function(c){c.identifer="fake";b.update([c]);return!0})},update:function(d){for(var g={},f=0;f<d.length;f++){var h=d[f],a=h.identifier,k=b[a];k||(k=c.pop(),k||(k=m("\x3cdiv\x3e\x3c/div\x3e").css(l),m("body").append(k)));g[a]=k;k.offset({left:h.pageX-20,top:h.pageY-20});k.css("visibility","visible")}for(a in b)b.hasOwnProperty(a)&&!g[a]&&(k=b[a],k.css("visibility","hidden"),c.push(k));b=g}}}})(Granite,jQuery);
(function(l,m,n,b){l.OptOutUtil=function(){var c={},d=[],g=[];c.init=function(b){b&&(d=b.cookieNames?b.cookieNames:d,g=b.whitelistCookieNames?b.whitelistCookieNames:g)};c.getCookieNames=function(){return d};c.getWhitelistCookieNames=function(){return g};c.isOptedOut=function(){for(var f=document.cookie.split(";"),d=0;d<f.length;d++){var a=b.trim(f[d].split("\x3d")[0]);if(-1<b.inArray(a,c.getCookieNames()))return!0}return!1};c.maySetCookie=function(d){return!(c.isOptedOut()&&-1===b.inArray(d,c.getWhitelistCookieNames()))};
return c}()})(Granite,Granite.Util,Granite.HTTP,jQuery);Granite.OptOutUtil.init(window.GraniteOptOutConfig);Granite.HTTP.detectContextPath();