String.prototype.endsWith||(String.prototype.endsWith=function(k,u){u=u<this.length?u|0:this.length;return this.substr(u-k.length,k.length)===k});String.prototype.startsWith||(String.prototype.startsWith=function(k,u){return this.substr(u||0,k.length)===k});
!function(k){!function(u){"object"==typeof exports?module.exports=u():"function"==typeof k&&k.amd?k(u):"undefined"!=typeof window?window.Promise=u():"undefined"!=typeof global?global.Promise=u():"undefined"!=typeof self&&(self.Promise=u())}(function(){return function g(h,n,c){function q(e,y){if(!n[e]){if(!h[e]){var B="function"==typeof require&&require;if(!y&&B)return B(e,!0);if(b)return b(e,!0);throw Error("Cannot find module '"+e+"'");}y=n[e]={exports:{}};h[e][0].call(y.exports,function(b){var c=
h[e][1][b];return q(c?c:b)},y,y.exports,g,h,n,c)}return n[e].exports}for(var b="function"==typeof require&&require,e=0;e<c.length;e++)q(c[e]);return q}({1:[function(g,h,n){g=g("../lib/decorators/unhandledRejection")(g("../lib/Promise"));h.exports="undefined"!=typeof global?global.Promise=g:"undefined"!=typeof self?self.Promise=g:g},{"../lib/Promise":2,"../lib/decorators/unhandledRejection":4}],2:[function(g,h,n){!function(c){c(function(c){var b=c("./makePromise"),e=c("./Scheduler");c=c("./env").asap;
return b({scheduler:new e(c)})})}(function(c){h.exports=c(g)})},{"./Scheduler":3,"./env":5,"./makePromise":7}],3:[function(g,h,n){!function(c){c(function(){function c(b){this._async=b;this._running=!1;this._queue=this;this._queueLen=0;this._afterQueue={};this._afterQueueLen=0;var c=this;this.drain=function(){c._drain()}}return c.prototype.enqueue=function(b){this._queue[this._queueLen++]=b;this.run()},c.prototype.afterQueue=function(b){this._afterQueue[this._afterQueueLen++]=b;this.run()},c.prototype.run=
function(){this._running||(this._running=!0,this._async(this.drain))},c.prototype._drain=function(){for(var b=0;b<this._queueLen;++b)this._queue[b].run(),this._queue[b]=void 0;this._queueLen=0;this._running=!1;for(b=0;b<this._afterQueueLen;++b)this._afterQueue[b].run(),this._afterQueue[b]=void 0;this._afterQueueLen=0},c})}(function(c){h.exports=c()})},{}],4:[function(g,h,n){!function(c){c(function(c){function b(b){throw b;}function e(){}var B=c("../env").setTimer,h=c("../format");return function(c){function g(b){b.handled||
(k.push(b),n("Potentially unhandled rejection ["+b.id+"] "+h.formatError(b.value)))}function y(b){var c=k.indexOf(b);0<=c&&(k.splice(c,1),m("Handled previous rejection ["+b.id+"] "+h.formatObject(b.value)))}function x(b,c){w.push(b,c);null===v&&(v=B(q,0))}function q(){for(v=null;0<w.length;)w.shift()(w.shift())}var f,n=e,m=e;"undefined"!=typeof console&&(f=console,n="undefined"!=typeof f.error?function(b){f.error(b)}:function(b){f.log(b)},m="undefined"!=typeof f.info?function(b){f.info(b)}:function(b){f.log(b)});
c.onPotentiallyUnhandledRejection=function(b){x(g,b)};c.onPotentiallyUnhandledRejectionHandled=function(b){x(y,b)};c.onFatalRejection=function(c){x(b,c.value)};var w=[],k=[],v=null;return c}})}(function(c){h.exports=c(g)})},{"../env":5,"../format":6}],5:[function(g,h,k){!function(c){c(function(c){function b(b){var c,f=document.createTextNode("");(new b(function(){var b=c;c=void 0;b()})).observe(f,{characterData:!0});var e=0;return function(b){c=b;f.data=e^=1}}var e,h="undefined"!=typeof setTimeout&&
setTimeout,g=function(b,c){return setTimeout(b,c)},k=function(b){return clearTimeout(b)},n=function(b){return h(b,0)};if("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))n=function(b){return process.nextTick(b)};else if(e="function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver)n=b(e);else if(!h)var q=c("vertx"),g=function(b,c){return q.setTimer(c,b)},k=q.cancelTimer,n=q.runOnLoop||q.runOnContext;
return{setTimer:g,clearTimer:k,asap:n}})}(function(c){h.exports=c(g)})},{}],6:[function(g,h,k){!function(c){c(function(){function c(c){var e=String(c);return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=b(c,e)),e}function b(b,c){try{return JSON.stringify(b)}catch(y){return c}}return{formatError:function(b){var e="object"==typeof b&&null!==b&&(b.stack||b.message)?b.stack||b.message:c(b);return b instanceof Error?e:e+" (WARNING: non-Error used)"},formatObject:c,tryStringify:b}})}(function(c){h.exports=
c()})},{}],7:[function(g,h,k){!function(c){c(function(){return function(c){function b(a,b){this._handler=a===f?b:e(a)}function e(a){function b(a){l.resolve(a)}function c(a){l.reject(a)}function d(a){l.notify(a)}var l=new m;try{a(b,c,d)}catch(F){c(F)}return l}function h(a){return a instanceof b?a:new b(f,new w(x(a)))}function g(a){return new b(f,new w(new p(a)))}function k(a,r,c){function d(b,d,l){l.resolved||n(c,t,b,a(r,d,b),l)}function t(a,b,c){q[a]=b;0===--k&&c.become(new v(q))}for(var e,h="function"==
typeof r?d:t,g=new m,k=c.length>>>0,q=Array(k),p=0;p<c.length&&!g.resolved;++p)e=c[p],void 0!==e||p in c?n(c,h,p,e,g):--k;return 0===k&&g.become(new v(q)),new b(f,g)}function n(a,c,t,d,l){if(L(d)){d=d instanceof b?d._handler.join():K(d);var r=d.state();0===r?d.fold(c,t,void 0,l):0<r?c(t,d.value,l):(l.become(d),q(a,t+1,d))}else c(t,d,l)}function q(a,b,c){for(;b<a.length;++b){var r=x(a[b]);if(r!==c){var t=r.state();0===t?r.visit(r,void 0,r._unreport):0>t&&r._unreport()}}}function x(a){return a instanceof
b?a._handler.join():L(a)?K(a):new v(a)}function K(a){try{var b=a.then;return"function"==typeof b?new I(b,a):new v(a)}catch(t){return new p(t)}}function f(){}function E(){}function m(a,c){b.createContext(this,c);this.consumers=void 0;this.receiver=a;this.handler=void 0;this.resolved=!1}function w(a){this.handler=a}function I(a,b){m.call(this);z.enqueue(new M(a,b,this))}function v(a){b.createContext(this);this.value=a}function p(a){b.createContext(this);this.id=++T;this.value=a;this.reported=this.handled=
!1;this._report()}function J(a,b){this.rejection=a;this.context=b}function N(a){this.rejection=a}function G(a,b){this.continuation=a;this.handler=b}function O(a,b){this.handler=b;this.value=a}function M(a,b,c){this._then=a;this.thenable=b;this.resolver=c}function U(a,b,c,d,l){try{a.call(b,c,d,l)}catch(F){d(F)}}function C(a,b,c,d){this.f=a;this.z=b;this.c=c;this.to=d;this.resolver=P;this.receiver=this}function L(a){return("object"==typeof a||"function"==typeof a)&&null!==a}function Q(a,c,t,d){if("function"!=
typeof a)a=d.become(c);else{b.enterContext(c);try{d.become(x(a.call(t,c.value)))}catch(l){d.become(new p(l))}a=void b.exitContext()}return a}function V(a,b,c){try{return a(b,c)}catch(d){return g(d)}}function A(a,b){b.prototype=W(a.prototype);b.prototype.constructor=b}function X(a,b){return b}function D(){}var z=c.scheduler,H=function(){return"undefined"!=typeof process&&null!==process&&"function"==typeof process.emit?function(a,b){return"unhandledRejection"===a?process.emit(a,b.value,b):process.emit(a,
b)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(a,b,c){var d=!1;try{d=new c("unhandledRejection")instanceof c}catch(l){}return d?function(a,d){a=new c(a,{detail:{reason:d.value,key:d},bubbles:!1,cancelable:!0});return!b.dispatchEvent(a)}:a}(D,self,CustomEvent):D}(),W=Object.create||function(a){function b(){}return b.prototype=a,new b};b.resolve=h;b.reject=g;b.never=function(){return R};b._defer=function(){return new b(f,new m)};b._handler=x;b.prototype.then=function(a,b,c){var d=
this._handler,r=d.join().state();if("function"!=typeof a&&0<r||"function"!=typeof b&&0>r)return new this.constructor(f,d);r=this._beget();return d.chain(r._handler,d.receiver,a,b,c),r};b.prototype["catch"]=function(a){return this.then(void 0,a)};b.prototype._beget=function(){var a=this._handler,b=this.constructor,a=new m(a.receiver,a.join().context);return new b(f,a)};b.all=function(a){return k(X,null,a)};b.race=function(a){if("object"!=typeof a||null===a)a=g(new TypeError("non-iterable passed to race()"));
else if(0===a.length)a=R;else if(1===a.length)a=h(a[0]);else{var c,e,d,l=new m;for(c=0;c<a.length;++c)if(e=a[c],void 0!==e||c in a){if(d=x(e),0!==d.state()){l.become(d);q(a,c+1,d);break}d.visit(l,l.resolve,l.reject)}a=new b(f,l)}return a};b._traverse=function(a,b){return k(V,a,b)};b._visitRemaining=q;f.prototype.when=f.prototype.become=f.prototype.notify=f.prototype.fail=f.prototype._unreport=f.prototype._report=D;f.prototype._state=0;f.prototype.state=function(){return this._state};f.prototype.join=
function(){for(var a=this;void 0!==a.handler;)a=a.handler;return a};f.prototype.chain=function(a,b,c,d,e){this.when({resolver:a,receiver:b,fulfilled:c,rejected:d,progress:e})};f.prototype.visit=function(a,b,c,d){this.chain(P,a,b,c,d)};f.prototype.fold=function(a,b,c,d){this.when(new C(a,b,c,d))};A(f,E);E.prototype.become=function(a){a.fail()};var P=new E;A(f,m);m.prototype._state=0;m.prototype.resolve=function(a){this.become(x(a))};m.prototype.reject=function(a){this.resolved||this.become(new p(a))};
m.prototype.join=function(){if(!this.resolved)return this;for(var a=this;void 0!==a.handler;)if(a=a.handler,a===this)return this.handler=new p(new TypeError("Promise cycle"));return a};m.prototype.run=function(){var a=this.consumers,b=this.handler;this.handler=this.handler.join();this.consumers=void 0;for(var c=0;c<a.length;++c)b.when(a[c])};m.prototype.become=function(a){this.resolved||(this.resolved=!0,this.handler=a,void 0!==this.consumers&&z.enqueue(this),void 0!==this.context&&a._report(this.context))};
m.prototype.when=function(a){this.resolved?z.enqueue(new G(a,this.handler)):void 0===this.consumers?this.consumers=[a]:this.consumers.push(a)};m.prototype.notify=function(a){this.resolved||z.enqueue(new O(a,this))};m.prototype.fail=function(a){a="undefined"==typeof a?this.context:a;this.resolved&&this.handler.join().fail(a)};m.prototype._report=function(a){this.resolved&&this.handler.join()._report(a)};m.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()};A(f,w);w.prototype.when=
function(a){z.enqueue(new G(a,this))};w.prototype._report=function(a){this.join()._report(a)};w.prototype._unreport=function(){this.join()._unreport()};A(m,I);A(f,v);v.prototype._state=1;v.prototype.fold=function(a,c,e,d){if("function"!=typeof a)d.become(this);else{b.enterContext(this);try{a.call(e,c,this.value,d)}catch(l){d.become(new p(l))}b.exitContext()}};v.prototype.when=function(a){Q(a.fulfilled,this,a.receiver,a.resolver)};var T=0;A(f,p);p.prototype._state=-1;p.prototype.fold=function(a,b,
c,d){d.become(this)};p.prototype.when=function(a){"function"==typeof a.rejected&&this._unreport();Q(a.rejected,this,a.receiver,a.resolver)};p.prototype._report=function(a){z.afterQueue(new J(this,a))};p.prototype._unreport=function(){this.handled||(this.handled=!0,z.afterQueue(new N(this)))};p.prototype.fail=function(a){this.reported=!0;H("unhandledRejection",this);b.onFatalRejection(this,void 0===a?this.context:a)};J.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=
!0,H("unhandledRejection",this.rejection)||b.onPotentiallyUnhandledRejection(this.rejection,this.context))};N.prototype.run=function(){this.rejection.reported&&(H("rejectionHandled",this.rejection)||b.onPotentiallyUnhandledRejectionHandled(this.rejection))};b.createContext=b.enterContext=b.exitContext=b.onPotentiallyUnhandledRejection=b.onPotentiallyUnhandledRejectionHandled=b.onFatalRejection=D;c=new f;var R=new b(f,c);return G.prototype.run=function(){this.handler.join().when(this.continuation)},
O.prototype.run=function(){var a=this.handler.consumers;if(void 0!==a)for(var c,e=0;e<a.length;++e){c=a[e];var d=c.progress,f=this.value,g=this.handler,h=c.receiver;c=c.resolver;if("function"!=typeof d)c.notify(f);else{b.enterContext(g);g=c;try{g.notify(d.call(h,f))}catch(S){g.notify(S)}b.exitContext()}}},M.prototype.run=function(){var a=this.resolver;U(this._then,this.thenable,function(b){a.resolve(b)},function(b){a.reject(b)},function(b){a.notify(b)})},C.prototype.fulfilled=function(a){this.f.call(this.c,
this.z,a,this.to)},C.prototype.rejected=function(a){this.to.reject(a)},C.prototype.progress=function(a){this.to.notify(a)},b}})}(function(c){h.exports=c()})},{}]},{},[1])(1)});"undefined"!=typeof systemJSBootstrap&&systemJSBootstrap()}();